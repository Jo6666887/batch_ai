# 批量AI问答&处理系统，快速构建你的数据集！

一款高效强大的批量AI问答处理平台，专为大规模问题或者数据处理&清洗而设计。通过多线程并发、智能负载均衡和数据自动清洗，实现企业级AI批量处理能力，为快速构建微调数据集而贡献！

## 💫 核心亮点

- **高并发处理引擎**：多线程架构支持10并发请求，性能提升300%
- **强大数据清洗**：自动移除HTML标签、特殊字符和多余空格，确保输入质量
- **智能API负载均衡**：动态创建多客户端实例，避免API限流
- **流式实时响应**：即时展示AI回复，无需等待全部完成
- **断点续传能力**：支持任务暂停/恢复，处理超大规模数据集
- **多模型支持**：无缝集成火山引擎和OpenAI多种模型
- **数据集生成工具**：一键创建高质量问题集

## 🔄 系统流程

```
         ┌─────────────┐                              ┌────────────────┐
         │  输入数据源  │                              │  AI模型服务    │
         │ Excel/CSV/  │                              │ 火山引擎/OpenAI │
         │  JSON文件   │                              └────────┬───────┘
         └──────┬──────┘                                       │
                │                                              │
                ▼                                              │
┌───────────────────────────────┐                              │
│         数据预处理            │                              │
│  ┌─────────────────────────┐  │                              │
│  │      数据清洗模块       │  │                              │
│  │   - 移除HTML标签        │  │                              │
│  │   - 清除多余空格        │  │                              │
│  │   - 去除控制字符        │  │                              │
│  │   - 修正标点符号        │  │                              │
│  └─────────────────────────┘  │                              │
└───────────────┬───────────────┘                              │
                │                                              │
                ▼                                              │
┌───────────────────────────────┐                              │
│        多线程处理引擎         │                              │
│  ┌─────────────────────────┐  │                              │
│  │     并行请求分发        │◄─┼──────────────────────────────┘
│  │   (最大10并发线程)      │  │
│  └─────────────────────────┘  │
│  ┌─────────────────────────┐  │
│  │     流式响应聚合        │  │
│  └─────────────────────────┘  │
└───────────────┬───────────────┘
                │
                ▼
┌───────────────────────────────┐
│         结果处理与展示        │
│  ┌─────────────────────────┐  │
│  │     实时进度监控        │  │
│  └─────────────────────────┘  │
│  ┌─────────────────────────┐  │
│  │     多格式结果导出      │  │
│  │   (CSV/JSON/JSONL)      │  │
│  └─────────────────────────┘  │
└───────────────────────────────┘
```

## 🧠 设计思路

本系统采用模块化设计，关键模块包括：

1. **数据清洗模块**：针对真实世界的混乱数据，设计了全面的预处理流程，确保输入质量
2. **并行处理引擎**：通过线程池管理，实现动态任务分配，避免资源浪费
3. **API客户端池**：创建多个API客户端实例，通过轮询方式分配请求，提高吞吐量
4. **流式响应处理**：实时收集并展示AI回复，支持超长对话处理
5. **断点续传系统**：通过任务状态持久化，实现任务的暂停、恢复和中断后继续

## 🛠️ 快速开始

### 安装依赖

```bash
pip install -r requirements.txt
```

### 配置API密钥

创建`.env`文件并设置API密钥（这里可以设置，也可以不设置，因为可以去首页界面设置，作者默认设置了火山引擎）:

```
ARK_API_KEY="您的API密钥"
```

### 启动应用

```bash
python batchai.py
```

访问 http://127.0.0.1:8080/ 开始使用

## 📋 使用指南

### 批量问题处理

1. 上传包含问题的Excel/CSV/JSON文件
2. 设置系统提示词和温度参数
3. 选择模型提供商和具体模型
4. 点击"开始处理"启动批处理
5. 实时查看处理进度和结果
6. 处理完成后下载对应格式结果

### 问题集生成

1. 点击"生成问题集"按钮
2. 输入种子提示词和生成数量
3. 系统自动批量生成高质量问题
4. 直接使用生成的问题集进行批量回答

## 🔧 高级特性

- **强大的数据清洗**：自动识别并清理HTML标签、特殊Unicode字符、重复标点等
- **智能资源管理**：动态分配处理资源，避免API限流
- **多格式支持**：支持多种输入和输出格式，满足不同场景需求
- **任务管理系统**：可视化管理多个并行任务，实时监控进度

## 📊 性能优化建议

- 大规模任务(>1000问题)建议适当增大批处理大小
- 针对网络波动情况，可调整重试策略提高成功率
- 针对不同API供应商，调整客户端实例数量以获得最佳性能




如果觉得很赞，给作者买杯咖啡吧！
![image](https://github.com/user-attachments/assets/ea09e0d4-5963-4d87-9887-0069952a3553)

