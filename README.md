# 智能批量对话处理系统

一个强大的企业级AI批量对话处理平台，基于Flask开发，支持高并发请求处理、动态负载均衡，能够高效处理大规模问题集，适用于数据集制作、AI模型测试、批量内容生成等场景。

## 🚀 核心优势

- **高性能并发处理**: 采用异步多线程架构，支持同时发起多达10个并行请求，显著提升处理速度
- **智能负载分配**: 动态创建多客户端实例，自动平衡请求负载，防止API限流
- **多模型支持**: 同时支持火山引擎和OpenAI模型，灵活切换不同AI服务提供商
- **流式响应处理**: 实时流式获取AI回复，支持超长对话处理，响应无延迟
- **断点续传功能**: 支持任务暂停/恢复/中断后继续，确保长时间任务不会丢失进度
- **数据集快速制作**: 内置强大的数据集生成工具，一键批量生成高质量问题集
- **高级温度控制**: 精确控制模型回复的创造性与确定性，满足不同场景需求

## 🔍 功能详解

### 批量问题处理

- **智能并行处理**: 自动将问题分批并行处理，最大化API利用率
- **实时进度监控**: 直观展示处理进度、完成数量和预估剩余时间
- **高级错误处理**: 智能重试机制，自动处理网络波动和API超时
- **格式多样化**: 支持Excel(.xls/.xlsx)输入，CSV导出，便于与其他工具集成
- **灵活系统提示词**: 自定义系统提示词，精确控制AI回复风格和内容

### 数据集生成工具

- **一键批量生成**: 基于少量种子提示快速生成大量高质量问题
- **智能多样性控制**: 通过温度参数调节，确保生成问题的多样性和创造性
- **自定义主题控制**: 通过系统提示词定向生成特定领域或主题的问题集
- **无限扩展能力**: 基于生成的问题继续扩展，创建规模更大的数据集

### 高级API管理

- **多模型切换**: 支持火山引擎和OpenAI的多种模型，一键切换不同模型
- **自定义API配置**: 可设置自定义base_url，支持私有化部署和代理服务
- **API密钥管理**: 灵活配置API密钥，支持环境变量和界面输入两种方式
- **HTTP/2协议支持**: 启用HTTP/2以提高连接效率和性能

## 💻 安装与配置

### 依赖安装

```bash
pip install -r requirements.txt
```

### API密钥配置

创建`.env`文件并设置您的API密钥:

```
ARK_API_KEY="您的API密钥"
```

或在应用界面中直接输入API密钥。

### 启动应用

```bash
python app.py
```

访问 http://127.0.0.1:5000/ 开始使用

## 📊 高级使用指南

### 批量问题处理

1. 在首页上传包含问题的Excel文件(列名任意)
2. 设置系统提示词以控制AI回答风格和内容
3. 调整温度参数(0.1-1.0)控制回答的创造性
4. 选择模型提供商(火山引擎/OpenAI)和具体模型
5. 点击"开始处理"启动高性能并行处理
6. 实时查看处理进度和结果，支持中途暂停/恢复
7. 处理完成后下载CSV格式结果文件

### 数据集生成

1. 点击首页"生成问题集"按钮
2. 输入种子提示词，描述您需要生成的问题类型
3. 设置生成数量和温度参数
4. 系统将自动批量生成相关问题集
5. 下载生成的问题集用于后续处理

## 🛠 性能优化建议

- 对于大型数据集(>1000问题)，建议适当增加批处理大小
- 针对不同API供应商，调整客户端实例数量可获得最佳性能
- 处理超长问题时，考虑降低并发数以避免内存压力
- 使用HTTP/2支持可显著提升大批量请求的处理效率

## ⚠️ 注意事项

- 上传Excel文件首列应包含问题文本
- 处理结果会自动保存，可随时关闭页面稍后继续查看
- 使用自定义API密钥时，请确保API密钥有足够的配额
- 生成大量问题可能消耗较多API额度，请合理规划使用 